[effect_script*]
{
	name	=lyottia_09_acid_gas;

	script	=[[
			sound play s_e_spell_acid_cloud_cast at #SOURCE_POSITION dist 3 20;

			set $scale 1;
			
			sfx create fire #TARGET_KB
				"must_update()color0(.498,.714,1)color1(1,1,1)count(45)velocity(0,-4,0)
				texture(b_sfx_armor_freeze)accel(0,10,0)alphafade(.45)flamesize(4)max_radius(8)
				min_displace(-.33)max_displace(.66)[1]";
			sfx start #POP;

			sfx create fire #TARGET_KB
				"ts(.3)must_update()scale($scale)color0(.498,.714,1)count(12)
				velocity(0,2,0)accel(0,0,0)alphafade(.85)flamesize(.3)
				max_radius(6)[1]";
			sfx start #POP;

			sfx create fire #TARGET_KB
				"must_update()scale($scale)color0(1,1,1)count(30)
				velocity(0,1,0)accel(0,0,0)alphafade(.15)flamesize(.1)
				min_radius(6)max_radius(8)[0][1]";
			sfx start #POP;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=lyottia_09_spark_multi;

	script	=[[
			sound play s_e_spell_spark_multi_cast at #SOURCE_POSITION dist 3 25;

			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(.5,0,0)>;
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,-.5)>;
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(-.5,0,0)>;
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,.5)>;
			
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,0)>;
			
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(1,0,0)>;
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,-1)>;
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(-1,0,0)>;
			frandrange 5 10; frandrange 1 2;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,1)>;

			pause 5;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*] // -ET
{
	name	=lyottia_09_dancing_zap;

	script	=[[
			sound play s_e_spell_spark_cast at #SOURCE_POSITION dist 3 25;

			sfx create explosion #SOURCE
				"ts(.7)must_update()radius(.33)texture(b_sfx_snow_01)color0(.7,.7,1)
				color1(.141,.196,1)ivel(.15,.55,.15)vmin(6)vmax(10)omni_dir()
				fade_range(0,1,0)scale(.75)";		
			
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -100.5 100.5; frandrange -100.5 100.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -100.5 100.5; frandrange -100.5 100.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -100.5 100.5; frandrange -100.5 100.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -100.5 100.5; frandrange -100.5 100.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -100.5 100.5; frandrange -100.5 100.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -100.5 100.5; frandrange -100.5 100.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			]];
}
[effect_script*]
{
	name	= lyottia_09_effect_scorpiot_missile_base;

	script	=[[

			/////////////////////////////////////////
			// This is the main trackball for the effect, everything is based off of this.
			sfx create trackball #TARGET_KB 
				"must_update()invisible()scale(.5)color0(.1,.3,.1)dur(6)afterlife(2)ts(1.4)offset([0], 0, 0)velocity(7.5)accel(1)";
			set $trackball #POP;
			sfx position_at $trackball [0] source;
			sfx friendly party $trackball;

			
			sfx create fire #SOURCE		
				"must_update()ts(2)count(10)scale(1.1)color0(0,0,.8)alphafade(2.25)
				velocity(0,0,0)accel(0,0,0)min_displace(-1)max_displace(1)max_radius(2)
				texture(b_sfx_fireball-01)dur(3)";
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx start $fire;

			sfx start $trackball;

			waitfor collision $trackball #DEFAULT_TIMEOUT;
			
			set $collision_type #POP;
			
			if ( $collision_type != #NO_COLLISION )
			{
				get target_position $trackball target;
				sound play s_e_spell_energy_ball_hit at #POP dist 3 20;
				
				get collision point $trackball;
				sfx create fire #POP
					"ts(1)scale(0.2)count(20)color0(0,0,.8)color1(.05,.05,0)
					alphafade(.6)velocity(0,5,0)accel(0,5,0)flamesize(2)max_displace(1)
					min_displace(-1)max_radius(6)dur(.33)offset(0,-.33,0)";
				sfx start #POP;
				
			}
			
			sfx destroy $trackball;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	= lyottia_09_effect_scorpiot_missile_pair;

	script	=[[

			sound play s_e_nis_chamberstars_flash at #SOURCE_POSITION dist 8 20;

			pause .1;

			
			call lyottia_09_effect_scorpiot_missile_base @weapon_bone;
			call lyottia_09_effect_scorpiot_missile_base @shield_bone;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	= lyottia_09_effect_scorpiot_missile;

	script	=[[
			
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			call lyottia_09_effect_scorpiot_missile_pair;
			pause .05;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	= lyottia_09_effect_scorpiot_summon;

	script	=[[

			/////////////////////////////////////////
			// This is the main trackball for the effect, everything is based off of this.
			sfx create trackball #TARGET_KB 
				"must_update()invisible()scale(.5)color0(.1,.3,.1)dur(6)afterlife(2)ts(1.4)offset([0], 0, 0)velocity(7.5)accel(1)";
			set $trackball #POP;
			sfx position_at $trackball Bone08 source;
			sfx friendly party $trackball;

			sfx create orbiter #TARGET 
				"must_update()scale(1)dur(3)radius(0)theta(0)iphi(0)
				itheta(0)model(lyottia_ambient_09_scorpiot)";
			set $spider #POP;
			sfx rat $spider;
			sfx target $spider $trackball;
			sfx start $spider;

			sfx start $trackball;

			waitfor collision $trackball #DEFAULT_TIMEOUT;
			
			set $collision_type #POP;
			
			if ( $collision_type != #NO_COLLISION )
			{
				
			}
			
			sfx destroy $trackball;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=lyottia_09_effect_scorpiot_flame;

	script	=[[
			set $velocity 50;
			set $accel 50;

			set $flames1 100;
			set $flames2 100;

			set $width1 20;
			set $width2 40;


			sfx create fireb #SOURCE 
				"must_update()fctrl(0,0,5)flamesize(1)alphafade(.5)ts(.6)dur(.5)color0(1,1,1)
				velocity($velocity, -10, 0)accel($accel, -10, 0)cvel(1)lower_r0(0)lower_r1(0)
				upper_r0($width1)upper_r1($width2)count($flames2)bone_orient()
				[0]texture(b_sfx_fireball-01)";
			sfx attach_point #PEEK @shield_bone target;
			sfx friendly party #PEEK;
			sfx start #POP;

			sfx create fireb #SOURCE 
				"must_update()fctrl(0,0,5)flamesize(1)alphafade(.5)ts(.6)dur(.5)color0(1,1,1)
				velocity(-$velocity, 10, 0)accel(-$accel, 10, 0)cvel(1)lower_r0(0)lower_r1(0)
				upper_r0($width1)upper_r1($width2)count($flames2)bone_orient()
				[0]texture(b_sfx_fireball-01)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx friendly party #PEEK;
			sfx start #POP;

			sfx create fireb #SOURCE 
				"must_update()fctrl(0,0,5)flamesize(1)alphafade(.5)ts(.6)dur(.5)color0(1,1,1)
				velocity($velocity, 0, 0)accel($accel, 5, 0)cvel(1)lower_r0(0)lower_r1(0)
				upper_r0($width1)upper_r1($width2)count($flames2)bone_orient()
				[0]texture(b_sfx_fireball-01)offset(.68,.07,0)";
			sfx attach_point #PEEK Bone08 target;
			sfx friendly party #PEEK;
			sfx start #POP;

			sound play s_e_attack_igniter at #SOURCE_POSITION dist 10 30;
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;


			]];
}
[effect_script*]
{
	name = lyottia_09_effect_scorpiot_laser_base;
	
		script	=[[
			sound play s_e_scorpiot_laser at #TARGET_POSITION dist 3 20;
		
			set $color .5,0,1;

			sfx create orbiter #SOURCE 
				"scale(.25)dur(1)tin(0)tout(1)color0($color)[1]
				radius(0)bone_orient()
				must_update()";
			sfx attach_point #PEEK [0] target;
			set $orb #POP;

			sfx create orbiter #TARGET_KB 
				"invisible()scale(.6)dur(1)tin(0)tout(1)color0($color)
				radius(0)must_update()";
			set $orb2 #POP;
			sfx start $orb2;
			
			pause .1;
			
			// Create the lightning using the second target supplied to the script
			sfx create lightning #SOURCE 
				"must_update()subd(0)minsubd(4)scale(1.4)subd(1)minsubd(1)mindisplace(0)
				maxdisplace(0)ts(4)dur(2.2)color0($color)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			set $bolt1 #POP;
			sfx target $bolt1 $orb2;
			sfx attach $orb $bolt1;
			
			sfx create lightning #SOURCE 
				"must_update()subd(0)minsubd(4)scale(.4)subd(1)minsubd(1)mindisplace(0)
				maxdisplace(0)ts(4)dur(2.2)color0(.3,1,0)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			set $bolt2 #POP;
			sfx target $bolt2 $orb2;
			sfx attach $orb $bolt2;
			

			sfx create fire #SOURCE 
				"must_update()scale(1.2)velocity(0,20,0)accel(0,-20,0)line()dur(2.25)
				color0(.7,.7,1)color1(0,0,0)count(50)min_displace(0)
				max_displace(0)flamesize(2)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			set $line2 #POP;
			sfx target $line2 $orb2;
			sfx attach $orb $line2;
			
			// Shoot
			sfx start $orb;
			sfx start $orb2;

			sfx create explosion #TARGET_KB 
				"must_update()scale(.5)color0(.7,.7,1)color1(0,0,0)count(50)omni_dir()
				texture(b_sfx_sparkle01)";
			sfx start #POP;

			sfx create fire #TARGET_KB
				"color0(.7,.7,1)color1(0,0,0)velocity(0,0,0)accel(0,0,0)dur(1)
				scale(.8)";
			sfx start #POP;

			]];
}
[effect_script*]
{
	name	= lyottia_09_effect_scorpiot_laser;

	script	=[[
			
			call lyottia_09_effect_scorpiot_laser_base @weapon_bone s<offset(0, 0, 0)>;
			call lyottia_09_effect_scorpiot_laser_base @shield_bone s<offset(0, 0, 0)>;
			call lyottia_09_effect_scorpiot_laser_base Bone08 s<offset(.68,.07,0)>;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=lyottia_09_orb_rock_orbiter;

	script	=[[

            sfx create orbiter #TARGET 
				"invisible()color0(.3,.7,1)radius(5)scale(0.5)offset(0,0.5,0)smooth()free()iphi(2)";
            set $orbiter #POP;
            sfx start $orbiter;

			sfx create orbiter #TARGET 
				"radius(0)scale(1)model(lyottia_ambient_item_09_rock)";
            sfx rat #PEEK;
			sfx target #PEEK $orbiter;
            sfx start #POP;


			//Send back a mid sync message with the ID of the orbiter.  This is important!  The skrit needs
			//to know this ID so that it can use the ID to get the location of the orbiter.
			worldmsg WE_SPELL_SYNC_MID #OWNER_GOID #OWNER_GOID $orbiter;

			]];
}
[effect_script*]
{
	name	=lyottia_09_orb_rock_sound;

	script	=[[

			sound play s_e_spell_block_of_stone_cast at #SOURCE_POSITION dist 3 30;

			]];
}
[effect_script*]
{
	name	=lyottia_09_orb_rock_projectile;

	script	=[[
			sound play s_e_explode_rockbeast at #SOURCE_POSITION dist 3 30;

			///////////////////////////////////////////////////
			// create the trackball to base the whole effect on
			sfx create trackball #TARGET_KB 
				"invisible()must_update()velocity(12)dur(4)scale(.25)";
			set $trackball #POP;
			sfx friendly party $trackball;
			sfx start $trackball;
			sfx position_at $trackball @weapon_bone source;

			sfx create orbiter #TARGET 
				"must_update()scale(1)dur(3)radius(0)theta(0)iphi(0)
				itheta(0)model(lyottia_ambient_item_09_rock)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			waitfor collision $trackball #DEFAULT_TIMEOUT;
			set $collision_type #POP;

			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get target_position $trackball target;
				sound play s_e_explode_rockbeast at #POP dist 3 30;
			}


			if ( $collision_type == #OBJECT_COLLISION )
			{

				get collision target $trackball target;

				sfx create sray #TARGET_KB 
					"ts(5)offset(0,.5,0)dur(.2)scale(.55)radius(.5)lmin(1.5)
					lmax(3.5)color0(0,0,0)color1(.3,.3,.25)theta(0,0,0)
					phi(0,0,0)wsmin(0)wsmax(0)wemin(.1)wemax(.1)";
				sfx start #POP;

				sfx create explosion #TARGET_KB 
					"dur(1)scale(1.2)offset(0,.2,0)color0(.2,.2,.15)color1(.0,.0,.0)
					omni_dir()";
				sfx start #POP;
				
				sfx create fire #TARGET_KB 
					"scale(1.2)dur(1)dark()grey_tex()color0(.3,.3,.3)color1(0,0,0)
					count(20)alphafade(.2)flamesize(6)max_radius(16)instant()
					velocity(0,2,0)accel(0,0,0)";
				sfx start #POP;
			}


			if ( $collision_type == #TERRAIN_COLLISION )
			{

				get collision point $trackball target;

				sfx create sray #POP 
					"ts(5)offset(0,.5,0)dur(.2)scale(.55)radius(.5)lmin(1.5)
					lmax(3.5)color0(0,0,0)color1(.3,.3,.25)theta(0,0,0)
					phi(0,0,0)wsmin(0)wsmax(0)wemin(.1)wemax(.1)";
				sfx start #POP;

				get collision point $trackball target;

				sfx create explosion #POP 
					"dur(1)scale(1.2)offset(0,.2,0)color0(.2,.2,.15)color1(.0,.0,.0)
					omni_dir()";
				sfx start #POP;

				get collision point $trackball target;

				sfx create fire #POP 
					"scale(1.2)dur(1)dark()grey_tex()color0(.3,.3,.3)color1(0,0,0)
					count(20)alphafade(.2)flamesize(6)max_radius(16)instant()
					velocity(0,2,0)accel(0,0,0)";
				sfx start #POP;
			}

			///////////////////////////////////
			// clean up.

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];

}