[effect_script*] // -ET
{
	name	=lyottia_05_armor;

	script	=[[	
				sound play s_e_spell_flame_shield_cast at #SOURCE_POSITION dist 3 20;
				
				
				set $speed .05;
				set $scale 2;
				set $radius 2.5;
				set $model lyottia_ambient_item_05_braak_boulder;
				
				sfx create orbiter #TARGET 
					"itheta(0)scale($scale)iphi(3)phi(0)radius($radius)model($model)
					color0(1,.35,.15)free()";
				sfx start #POP;

				sfx create orbiter #TARGET 
					"itheta(0)scale($scale)iphi(3)phi(1.31)radius($radius)model($model)
					color0(1,.35,.15)free()";
				sfx start #POP;

				sfx create orbiter #TARGET 
					"itheta(0)scale($scale)iphi(3)phi(2.62)radius($radius)model($model)
					color0(1,.35,.15)free()";
				sfx start #POP;

				sfx create orbiter #TARGET 
					"itheta(0)scale($scale)iphi(3)phi(3.93)radius($radius)model($model)
					color0(1,.35,.15)free()";
				sfx start #POP;
				
				sfx create orbiter #TARGET 
					"itheta(0)scale($scale)iphi(3)phi(5.24)radius($radius)model($model)
					color0(1,.35,.15)free()";
				sfx start #POP;
			]];
}
[effect_script*] // -ET
{
	name	=lyottia_05_lightning_wall;

	script	=[[
			sound play s_e_ds2_cm_gatheredbolt_charge at #SOURCE_POSITION dist 1 40;

			set $offset 2.5;			
			
			frandrange f<-$offset> f<$offset>; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call lyottia_05_lightning_wall_base v<#POP 0 #POP> [0] [1];
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			]];
}
[effect_script*] // -ET
{
	name	=lyottia_05_lightning_wall_base;

	script	=[[
			// sound play s_e_spell_iron_fist_cast at #TARGET_POSITION

			frandrange .6 1;
			frandrange .2 .6;
			frandrange -1 1;

			sfx create trackball #TARGET_KB 
				"invisible()no_collide()velocity(5)spin(#POP)radius(#POP)
				must_update()ts(#POP)accel(-.05)color0(0,.05,.05)scale(.2)
				afterlife(.5)rvel_max(0)[2]";
			set $trackball #POP;
			sfx offset_bone $trackball [0] target;
			sfx position_at $trackball @weapon_bone source;
			sfx start $trackball;

			frandrange .2 .5;
			frandrange 0 6.28;
			frandrange -1 1;

			sfx create orbiter #TARGET
				"radiusi(1)free()smooth()invisible()iphi(#POP)phi(#POP)
				radius(#POP)";
			
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			set $orb #PEEK;
			sfx attach $trackball #POP;

			sfx create fire #TARGET
				"alphafade(1)ts(1)max_radius(0.1)min_displace(0)max_displace(0)
				velocity(0,0,0)accel(0,0,0)count(6)scale(.75)color0(0,.05,.05)
				color1(0,.05,.05)texture(b_sfx_002)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx attach $trackball #POP;

			sfx create fire #TARGET
				"flamesize(2)ts(3)max_radius(3)min_displace(0)max_displace(0)
				velocity(0,0,0)accel(0,0,0)count(15)scale(.5)color0(0,.05,.05)
				color1(0,.05,.05)texture(b_sfx_033)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx attach $trackball #POP;

			sfx create fire #TARGET
				"flamesize(.1)ts(1)max_radius(16)min_displace(-3)max_displace(3)
				velocity(0,0,0)accel(0,0,0)count(15)scale(.5)color0(0,.05,.05)
				color1(0,.05,.05)texture(b_sfx_sparkle01)[1]";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx attach $trackball #POP;

            // Adding tracking lightning

			sfx create orbiter #SOURCE
				"radiusi(1)free()smooth()invisible()radius(0)";
			
			set $orb2 #PEEK;
            sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()scale(1)subd(1)minsubd(1)mindisplace(0)maxdisplace(0)
				ts(4)color0(0,.05,.05)must_update()";
			sfx rat #PEEK;
			sfx target #PEEK $orb2;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()scale(1)subd(1)minsubd(1)mindisplace(0)maxdisplace(0)
				ts(4)color0(0,.05,.05)must_update()";
			sfx rat #PEEK;
			sfx target #PEEK $orb2;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()scale(1)subd(1)minsubd(1)mindisplace(0)maxdisplace(0)
				ts(4)color0(0,.05,.05)must_update()";
			sfx rat #PEEK;
			sfx target #PEEK $orb2;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()scale(1)subd(1)minsubd(1)mindisplace(0)maxdisplace(0)
				ts(4)color0(0,.05,.05)must_update()";
			sfx rat #PEEK;
			sfx target #PEEK $orb2;
			sfx target #PEEK $orb;
			sfx start #POP;

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			]];
}
[effect_script*] // -ET
{
	name	=lyottia_05_effect_storm_crown;

	script =[[

			sound play s_e_ds2_nb_wrathmagic at #TARGET_POSITION dist 1 45;

			//////////////////
			// Lower circle
			//////////////////
			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(.401,.601,0.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb11 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(.601,.601,0.001)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb12 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(.401,.601,-.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb13 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(-.401,.601,-.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb14 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(-.601,.601,0.001)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb15 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(-.401,.601,.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb16 #POP;

			sfx start $orb11;
			sfx start $orb12;
			sfx start $orb13;
			sfx start $orb14;
			sfx start $orb15;
			sfx start $orb16;

			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb11;
			sfx target #PEEK $orb12;
			sfx target #PEEK $orb13;
			sfx target #PEEK $orb14;
			sfx target #PEEK $orb15;
			sfx target #PEEK $orb16;
			sfx target #PEEK $orb11;
			sfx start #POP;

			//////////////////
			// Upper circle
			//////////////////
			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(.401,1.001,0.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb21 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(.601,1.001,0.001)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb22 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(.401,1.001,-.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb23 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(-.401,1.001,-.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb24 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(-.601,1.001,0.001)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb25 #POP;

			sfx create orbiter #SOURCE 
	           "must_update()color0(0,0,0)scale(.1)offset(-.401,1.001,.401)delay(.1)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb26 #POP;

			sfx start $orb21;
			sfx start $orb22;
			sfx start $orb23;
			sfx start $orb24;
			sfx start $orb25;
			sfx start $orb26;

			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb21;
			sfx target #PEEK $orb22;
			sfx target #PEEK $orb23;
			sfx target #PEEK $orb24;
			sfx target #PEEK $orb25;
			sfx target #PEEK $orb26;
			sfx target #PEEK $orb21;
			sfx start #POP;

			//////////////////
			// Connect circles
			//////////////////
			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb11;
			sfx target #PEEK $orb21;
			sfx start #POP;
			
			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb12;
			sfx target #PEEK $orb22;
			sfx start #POP;
			
			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb13;
			sfx target #PEEK $orb23;
			sfx start #POP;
			
			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb14;
			sfx target #PEEK $orb24;
			sfx start #POP;
			
			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb15;
			sfx target #PEEK $orb25;
			sfx start #POP;
			
			sfx create lightning #TARGET
				"must_update()color0(0,.3,.8)scale(0.1)subd(0.70)mindisplace(-.2)maxdisplace(.3)";
			sfx rat #PEEK;
			sfx target #PEEK $orb16;
			sfx target #PEEK $orb26;
			sfx start #POP;

			]];
}